{% extends 'base.html' %}

{% block title %}Dashboard - Zahnovia{% endblock %}

{% block content %}
<div class="page-header">
    <h1 class="page-title">Willkommen, {{ user.username }}!</h1>
    <p class="page-subtitle">Übersicht Ihrer Konformitätserklärungen</p>
</div>

<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 30px;">
    <!-- Stat Card 1 -->
    <div class="card" style="text-align: center;">
        <i class="fas fa-file-alt" style="font-size: 48px; color: #17a2b8; margin-bottom: 15px;"></i>
        <div style="font-size: 36px; font-weight: 700; color: #1a1a1a; margin-bottom: 10px;">
            {{ total_declarations }}
        </div>
        <div style="color: #718096; font-size: 16px;">
            Gesamt Erklärungen
        </div>
    </div>

    <!-- Quick Action -->
    <div class="card" style="text-align: center; background: linear-gradient(135deg, #17a2b8 0%, #138496 100%); color: white;">
        <i class="fas fa-plus-circle" style="font-size: 48px; margin-bottom: 15px;"></i>
        <div style="font-size: 20px; font-weight: 600; margin-bottom: 15px;">
            Neue Erklärung
        </div>
        <a href="{% url 'declaration_create' %}" class="btn" style="background: white; color: #17a2b8;">
            <i class="fas fa-file-medical"></i> Erstellen
        </a>
    </div>
</div>

<!-- Recent Declarations -->
<div class="card">
    <h2 class="card-title">
        <i class="fas fa-clock"></i> Letzte Erklärungen
    </h2>

    {% if recent_declarations %}
    <table class="table">
        <thead>
            <tr>
                <th>Nummer</th>
                <th>Erstellt</th>
                <th>Anzahl Materialien</th>
                <th>Aktionen</th>
            </tr>
        </thead>
        <tbody>
            {% for decl in recent_declarations %}
            <tr>
                <td><strong>{{ decl.declaration_number }}</strong></td>
                <td>{{ decl.created_at|date:"d.m.Y H:i" }}</td>
                <td>{{ decl.items.count }} Material(ien)</td>
                <td>
                    <a href="{% url 'declaration_detail' decl.pk %}" class="btn btn-primary" style="padding: 8px 16px; font-size: 14px;">
                        <i class="fas fa-eye"></i> Anzeigen
                    </a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p style="text-align: center; color: #718096; padding: 40px;">
        <i class="fas fa-inbox" style="font-size: 48px; display: block; margin-bottom: 15px;"></i>
        Noch keine Erklärungen erstellt.
    </p>
    {% endif %}
</div>
{% endblock %}
